{"version":3,"sources":["components/Caption.tsx","posts/higher-order-functions-in-javascript.mdx"],"names":["Caption","children","className","metadata","title","slug","banner","thumbnail","description","published","publishedOn","tags","layoutProps","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"mappings":"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","file":"static/js/0.cc106beb.chunk.js","sourcesContent":["import React from 'react';\r\n\r\ninterface Props {\r\n    children: string;\r\n}\r\n\r\nconst Caption: React.FC<Props> = ({ children }: Props) => {\r\n    return <small className=\"figcaption\">{children}</small>;\r\n};\r\n\r\nexport default Caption;\r\n","\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\n\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport Caption from '../components/Caption';\nexport const metadata = {\n  title: 'Higher-Order Functions in JavaScript',\n  slug: 'higher-order-functions-in-javascript',\n  banner: 'https://cdn-images-1.medium.com/max/1800/0*YKjms-x23HKyhXLW',\n  thumbnail: 'https://cdn-images-1.medium.com/max/1800/0*YKjms-x23HKyhXLW',\n  description: \"A practical guide through each of the higher-order array functions in JavaScript. Easy to understand examples using the dice game 'Yacht' to explore forEach, map, filter, reduce, every, some, find and findIndex functions. Hopefully after reading this you'll come away with a better understanding of how and why to use these, at first, unnecessary seeming functions.\",\n  published: true,\n  publishedOn: '2021-08-24',\n  tags: ['JavaScript', 'Tutorial', 'Arrays', 'Higher Order Functions']\n};\n\nconst layoutProps = {\n  metadata\n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h2>{`A Practical Guide`}</h2>\n    <h3>{`Why bother?`}</h3>\n    <p>{`One of the first great \"Aha!\" moments when learning to code is the introduction of the loop construct. The control they give the programmer to repeat blocks of code an arbitrary number of times is powerful and, once fully grasped, easy to become reliant on. This may be one reason that higher-order functions seem complex. In truth, they don't offer the programmer anything they couldn't already achieve with a simple loop, so the impetus to learn them is weak at best. However, what they lack in additional functionality is more than made up for with code clarity.`}</p>\n    <blockquote>\n      <p parentName=\"blockquote\">{`\"Indeed, the ratio of time spent reading versus writing is well over 10 to 1. We are constantly reading old code as part of the effort to write new code. …`}{`[Therefore,]`}{` making it easy to read makes it easier to write.\"`}</p>\n      <span>― Robert C.Martin, Clean Code: A Handbook of Agile Software Craftsmanship</span>\n    </blockquote>\n    <p>{`Per the above, clarity to the reader is of premium importance when writing code; even when that reader is only likely to be your future self.`}</p>\n    <p>{`How much clarity is truly gained for the reader when using higher-order functions rather than their more 'simple' looping cousins? That is for the individual to decide but hopefully, after reading through this guide you will be among those who feel that they improve code legibility and therefore code maintainability.`}</p>\n    <hr></hr>\n    <h3>{`A Roll of the Dice`}</h3>\n    <p>{`For our practical example, we will use the game of Yacht, a dice game that would become the basis of the much more famous Yahtzee. In Yacht a player rolls 5 dice and can retain as many or few as they choose while rerolling a maximum of two more times. The objective by the third roll is to have a point-scoring combination of dice between those retained and those just rolled. There are numerous ways to score points but largely they resemble poker hands that may be more familiar: full house, four of a kind, straights, etc. With the most points being awarded for a \"Yacht\" i.e. all 5 dice showing the same number.`}</p>\n    <p>{`It will be the task of JavaScript's higher-order functions to aid us in discovering which, if any, of the point-scoring combinations the player is eligible to take.`}</p>\n    <p>{`The 5 dice will be referred to as a `}<inlineCode parentName=\"p\">{`hand`}</inlineCode>{` and encoded as an array of numbers generated by a `}<inlineCode parentName=\"p\">{`rollDice()`}</inlineCode>{` function (which we will come to later).`}</p>\n    <h4>{`Array.prototype.forEach()`}</h4>\n    <p>{`The first thing we might like to be able to do is to log each of the dice in the hand to the console (or ideally render them in an appealing way in the window).`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`for (let i = 0; i < hand.length; i++) {\n    console.log(hand[i]);\n}\n`}</code></pre>\n    <Caption mdxType=\"Caption\">With a familiar for-loop, this can easily be achieved.</Caption>\n    <p>{`For a case as simple as this it is relatively clear to see what has been intended by the writer. However, even in such a simple case the first of our higher-order functions can improve code clarity.`}</p>\n    <p>{`This function behaves very similarly to our for-loop above. It iterates over an array and applies some code to each element in turn.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`hand.forEach((die) => console.log(die));\n`}</code></pre>\n    <Caption mdxType=\"Caption\">The above for-loop can be rewritten with a forEach call like so.</Caption>\n    <p>{`Here the `}<inlineCode parentName=\"p\">{`forEach`}</inlineCode>{` function is called against our `}<inlineCode parentName=\"p\">{`hand`}</inlineCode>{` array. Then each element is accessed by the name `}<inlineCode parentName=\"p\">{`die`}</inlineCode>{` (although any legal variable name will do) and then the code after the `}<inlineCode parentName=\"p\">{`=>`}</inlineCode>{` is executed for each `}<inlineCode parentName=\"p\">{`die`}</inlineCode>{`.`}</p>\n    <p>{`This code is much more explicit with its intent. It reads almost like an English sentence. But perhaps you aren't sold yet.`}</p>\n    <h4>{`Array.prototype.map()`}</h4>\n    <p>{`Let's then return to the `}<inlineCode parentName=\"p\">{`rollDice()`}</inlineCode>{` function that we used above but didn't examine and see how it was written.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`const rollDice = () => {\n    const newHand = [];\n    for (let i = 0; i < 5; i++) {\n        newHand.push(Math.ceil(Math.random() * 6));\n    }\n    return newHand;\n};\n`}</code></pre>\n    <Caption mdxType=\"Caption\">Perhaps something like this?</Caption>\n    <p>{`This works so you might be tempted to leave it at that. However, those glancing below will surely see a more elegant solution is coming.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`const rollDice = () => {\n    return new Array(5).fill(null).map(() => Math.ceil(Math.random() * 6));\n};\n`}</code></pre>\n    <Caption mdxType=\"Caption\">Elegance.</Caption>\n    <p>{`Create an array of the size we need and then filling it with the value `}<inlineCode parentName=\"p\">{`null`}</inlineCode>{` i.e. `}<inlineCode parentName=\"p\">{`const arr = [null, null, null, null, null]`}</inlineCode>{` then apply our map function. In this case, it takes each element (not named here as we don't use it) and then maps to it the code after `}<inlineCode parentName=\"p\">{`=>`}</inlineCode>{` returning a new array.`}</p>\n    <p>{`Sidenote: had we not first filled the array with `}<inlineCode parentName=\"p\">{`null`}</inlineCode>{` and simply used `}<inlineCode parentName=\"p\">{`fill`}</inlineCode>{` as follows:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`const rollDice = () => {\n    return new Array(5).fill(Math.ceil(Math.random() * 6));\n};\n`}</code></pre>\n    <Caption mdxType=\"Caption\">This likely doesn't do what you want.</Caption>\n    <p>{`We would have returned 5 copies of the same random number. Sometimes this may be the desired behaviour. However, it is worth being particularly cautious around this with any mutable data types (namely objects and arrays) as the returned array will be filled with 5 references to the same object or array. Mutating one will have the effect of mutating every other one.`}</p>\n    <h4>{`Array.prototype.filter()`}</h4>\n    <p>{`Let's imagine now we have a separate array that contains boolean values indicating whether the equivalent position in our `}<inlineCode parentName=\"p\">{`hand`}</inlineCode>{` array is to be retained for the next roll i.e `}<inlineCode parentName=\"p\">{`const retain = [false, true, false, false, true]`}</inlineCode>{` and we need to write a function to see which ones to keep.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`const nextHand = () => {\n    const result = [];\n    for (let i = 0; i < hand.length; i++) {\n        if (retain[i]) {\n            result.push(hand[i]);\n        }\n    }\n    return result;\n};\n`}</code></pre>\n    <Caption mdxType=\"Caption\">Using a for-loop to see which numbers to keep.</Caption>\n    <p>{`This at first glance, is not clear. Certainly, some comments could be included to indicate what is happening and why but, with higher-order functions being so readable we hardly need them for simple functions.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`const nextHand = () => {\n    return hand.filter((_, idx) => retain[idx]);\n};\n`}</code></pre>\n    <Caption mdxType=\"Caption\">As clear as any comment we could hope to write.</Caption>\n    <p>{`We apply a filter to our `}<inlineCode parentName=\"p\">{`hand`}</inlineCode>{` array which takes each element (named `}<inlineCode parentName=\"p\">{`_`}</inlineCode>{`by convention, as we won't use it) and its index and returns an array of elements for which the equivalent index in `}<inlineCode parentName=\"p\">{`retain`}</inlineCode>{` is `}<inlineCode parentName=\"p\">{`true`}</inlineCode>{`.`}</p>\n    <p>{`Once you begin to grow more familiar with the syntax of higher-order functions, they are far more clear.`}</p>\n    <h4>{`Array.prototype.reduce()`}</h4>\n    <p>{`One of the point-scoring categories in Yacht is named 'Choice'. For that, the player scores points equal to the sum of the dice held.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`const getChoiceScore = () => {\n    let score = 0;\n    for (let i = 0; i < hand.length; i++) {\n        score += hand[i];\n    }\n    return score;\n};\n`}</code></pre>\n    <Caption mdxType=\"Caption\">Summing the values in an array is child's play for the trusty for-loop.</Caption>\n    <p>{`This is fine but is needlessly broken up over several lines when something more simple to write (and more importantly read!) could replace it.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`const getChoiceScore = () => {\n    return hand.reduce((score, die) => score + die);\n};\n`}</code></pre>\n    <Caption mdxType=\"Caption\">Easy to read = Easy to maintain</Caption>\n    <p>{`Here the first argument to reduce is the (programmer chosen) name for the accumulator and the second is the (again, programmer chosen) name for each element. Following the `}<inlineCode parentName=\"p\">{`=>`}</inlineCode>{` is an expression that will evaluate to the value to be used for the accumulator when the next element is called (or returned when operating on the final element). Obviously, more complex operations can be performed than a simple summing, but, even in this simple case, the utility of this higher-order function should be clear.`}</p>\n    <h4>{`Array.prototype.every()`}</h4>\n    <p>{`The highest scoring point category in Yacht is appropriately called 'Yacht' racking up a massive 50 points for the player lucky enough to get it. Every die must have the same value.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`const getYachtScore = () => {\n    for (let i = 0; i < hand.length; i++) {\n        if (hand[i] !== hand[0]) {\n            return 0;\n        }\n    }\n    return 50;\n};\n`}</code></pre>\n    <Caption mdxType=\"Caption\">Trivial for a for-loop</Caption>\n    <p>{`To me, this reads very poorly. It is not at all obvious at a glance what conditions `}<inlineCode parentName=\"p\">{`hand`}</inlineCode>{` has to satisfy to return a score of 50.`}</p>\n    <p>{`With a higher-order function on the other hand (pun intended) we just have to parse through a, somewhat stilted, English sentence.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`const getYachtScore = () => {\n    return hand.every((die) => die === hand[0]) ? 50 : 0;\n};\n`}</code></pre>\n    <Caption mdxType=\"Caption\">Plus bonus ternary operator</Caption>\n    <p>{`Not only is it considerably shorter, but hopefully you are beginning to agree that it is also easier to read. If you came back to this article in two weeks having long forgotten how to score a 'Yacht' you, if you're anything like me, will find the higher-order function a much more succinct and clear explanation than the for-loop provided.`}</p>\n    <h4>{`Array.prototype.some()`}</h4>\n    <p>{`This function behaves very similarly to Array.Prototype.every() the only difference is that it returns `}<inlineCode parentName=\"p\">{`true`}</inlineCode>{` if any element satisfies the condition (and `}<inlineCode parentName=\"p\">{`false`}</inlineCode>{` if none of them does).`}</p>\n    <p>{`It doesn't have an obvious use case for our Yacht example but hopefully by understanding the Array.Prototype.every() function the use should be clear.`}</p>\n    <h4>{`Array.prototype.find() & Array.prototype.findIndex()`}</h4>\n    <p><em parentName=\"p\">{`I've grouped these two functions together as they operate the same; the first providing the value and the second its index.`}</em></p>\n    <p>{`These functions will return either the first element or index for the first element of an array that satisfies the function passed to it. If not found then `}<inlineCode parentName=\"p\">{`undefined`}</inlineCode>{` (in the case of `}<inlineCode parentName=\"p\">{`find()`}</inlineCode>{`) or `}<inlineCode parentName=\"p\">{`-1`}</inlineCode>{` (in the case of `}<inlineCode parentName=\"p\">{`findIndex()`}</inlineCode>{`).`}</p>\n    <p>{`These functions are good for checking the existence of an element based on set criteria, but won't give you a comprehensive list of those that meet it (for that, please use `}<inlineCode parentName=\"p\">{`filter()`}</inlineCode>{`). So, in fact, we don't have a use case for this function either in the current program. Hopefully, though, the potential use cases are apparent. Any time you would be using a `}<inlineCode parentName=\"p\">{`break`}</inlineCode>{` to short circuit out of a loop and using the value (or index) from that iteration through the loop can be replaced with one of these functions.`}</p>\n    <hr></hr>\n    <h3>{`Smooth Sailing from Here on Out?`}</h3>\n    <p>{`Now that we have explored each of these functions, hopefully, you will be able to find a place for them in any project you may come to work on. I think you can appreciate the simplicity of the syntax relative to what a for-loop offers.`}</p>\n    <p>{`Higher-order functions are not, however, without their detractors. One of the main criticisms, and a valid one, is that they are technically less efficient than the for-loop equivalent. All of the examples given above will run faster with the more long-winded and unclear syntax. There is, therefore, a trade-off between performance and readability. My strategy, that I would recommend to you, is as follows: wherever possible, use the higher-order functions and only when performance starts to suffer and optimizations need to be made should you refactor to use the for-loop. This gives all the benefits of readability in the early stages of a project when you are likely to be going over the same areas multiple times. Furthermore, if a comprehensive suite of tests is written the tests should continue to pass when any functions are converted to the for-loop syntax.`}</p>\n    <p>{`In conclusion, we have taken a tour of higher-order functions and how they may be applied to a real-life example. For anyone who followed along and is interested in the final result, a playable version of Yacht using (slightly modified versions of) the functions described above is available `}<a parentName=\"p\" {...{\n        \"href\": \"https://www.edwardmatthe.ws/iconic-yacht\"\n      }}>{`here`}</a>{`.`}</p>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;"],"sourceRoot":""}